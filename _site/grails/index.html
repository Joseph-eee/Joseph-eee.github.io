<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.26.0 by Michael Rose
  Copyright 2013-2024 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Grails | Deep Dive</title>
<meta name="description" content="Grails In a Nutshell">


  <meta name="author" content="Deep Dive">
  
  <meta property="article:author" content="Deep Dive">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Deep Dive">
<meta property="og:title" content="Grails">
<meta property="og:url" content="http://localhost:4000/grails/">


  <meta property="og:description" content="Grails In a Nutshell">







  <meta property="article:published_time" content="2024-06-10T00:00:00+00:00">





  

  


<link rel="canonical" href="http://localhost:4000/grails/">











  <meta name="naver-site-verification" content="69807bb91b0c527cb63cfcd964c59b348a60a7fa">


<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Deep Dive Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script type="text/javascript">
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->



<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/DeepDive.png" alt="Deep Dive"></a>
        
        <a class="site-title" href="/">
          Deep Dive
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/portfolio/"
                
                
              >About</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Category</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tag</a>
            </li><li class="masthead__menu-item">
              <a
                href="/year-archive-grid/"
                
                
              >By Year</a>
            </li><li class="masthead__menu-item">
              <a
                href="/search/"
                
                
              >Search</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      




  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/" itemprop="item"><span itemprop="name">Home</span></a>

          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        <li class="current">Grails</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  
    <div class="author__avatar">
      <a href="http://localhost:4000/">
        <img src="/assets/images/DeepDive.png" alt="Deep Dive" itemprop="image" class="u-photo">
      </a>
    </div>
  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="http://localhost:4000/" itemprop="url">Deep Dive</a>
    </h3>
    
      <div class="author__bio p-note" itemprop="description">
        <p>Deep Dive 2 Developing</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name" class="p-locality">Somewhere</span>
        </li>
      

      
        
          
            <li><a href="mailto:kensigel.j@gmail.com" rel="nofollow noopener noreferrer me"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span></a></li>
          
        
          
            <li><a href="https://Joseph-eee.github.io" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Website</span></a></li>
          
        
          
            <li><a href="https://github.com/Joseph-eee" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Grails">
    <meta itemprop="description" content="Grails In a Nutshell">
    <meta itemprop="datePublished" content="2024-06-10T00:00:00+00:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="http://localhost:4000/grails/" itemprop="url">Grails
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2024-06-10T00:00:00+00:00">June 10, 2024</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          11 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-fad fa-th-list"></i> Contents</h4></header>
              <ul class="toc__menu"><li><a href="#grails-in-a-nutshell">Grails In a Nutshell</a><ul><li><a href="#relationships-overview">Relationships Overview:</a></li><li><a href="#annotations">Annotations</a><ul><li><a href="#how-annotations-work">How Annotations Work</a></li><li><a href="#benefits-of-using-annotations">Benefits of Using Annotations</a></li><li><a href="#gsp-tags">GSP Tags</a></li><li><a href="#params">Params</a></li></ul></li></ul></li></ul>
            </nav>
          </aside>
        
        <h1 id="grails-in-a-nutshell">Grails In a Nutshell</h1>

<hr />
<p><strong>An Over Simplified Diagram</strong></p>

<pre><code class="language-mermaid">sequenceDiagram
    participant DB as Database
    participant D as Domain
    participant S as Service
    participant CO as Command Object
    participant C as Controller
    participant I as Interceptor
    participant V as View (.gsp/.gson)
    
    V-&gt;&gt;I: Request Preprocessing
    I-&gt;&gt;C: Good Request Data
    C-&gt;&gt;CO: Validate Data For Service
    CO-&gt;&gt;S: Validated Data
    S-&gt;&gt;D: Data Packaging
    D-&gt;&gt;DB: Packaged Data
    I--&gt;&gt;V: Redirect
    C--&gt;&gt;V: Data or New View
    D--&gt;&gt;C: Unpacked Data
    DB--&gt;&gt;D: Data Unpacking
</code></pre>

<h2 id="relationships-overview">Relationships Overview:</h2>

<hr />

<ul>
  <li><strong>GSP (Groovy Server Pages):</strong>
    <blockquote>
      <ul>
        <li>The view layer where the UI is generated.</li>
        <li>GSPs can dynamically render HTML based on the data passed from controllers.</li>
      </ul>
    </blockquote>
  </li>
  <li><em>Ex.</em></li>
</ul>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"layout"</span> <span class="na">content=</span><span class="s">"main"</span><span class="nt">/&gt;</span> <span class="c">&lt;!-- Use the main layout for this GSP --&gt;</span>
    <span class="nt">&lt;title&gt;</span>Add New Book<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;h1&gt;</span>Add New Book<span class="nt">&lt;/h1&gt;</span>

<span class="c">&lt;!-- Form to create a new book, posting to the save action of the BookController --&gt;</span>
<span class="nt">&lt;g:form</span> <span class="na">action=</span><span class="s">"save"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- Input fields for the book's title, author, and release date, bound to the properties of the BookCommand object --&gt;</span>
    <span class="nt">&lt;g:textField</span> <span class="na">name=</span><span class="s">"title"</span> <span class="na">value=</span><span class="s">"${bookCmd?.title}"</span> <span class="na">placeholder=</span><span class="s">"Title"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;g:textField</span> <span class="na">name=</span><span class="s">"author"</span> <span class="na">value=</span><span class="s">"${bookCmd?.author}"</span> <span class="na">placeholder=</span><span class="s">"Author"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;g:datePicker</span> <span class="na">name=</span><span class="s">"releaseDate"</span> <span class="na">value=</span><span class="s">"${bookCmd?.releaseDate}"</span> <span class="na">precision=</span><span class="s">"day"</span><span class="nt">/&gt;</span>
    <span class="c">&lt;!-- Submit button for the form --&gt;</span>
    <span class="nt">&lt;g:submitButton</span> <span class="na">name=</span><span class="s">"add"</span> <span class="na">value=</span><span class="s">"Add Book"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/g:form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<ul>
  <li><strong>Interceptor:</strong>
    <blockquote>
      <ul>
        <li>Intercepts all requests to Controllers, logging an informational message before processing each request.</li>
        <li>This can be expanded to include more complex logic like authentication, logging, or preprocessing input data.</li>
      </ul>
    </blockquote>
  </li>
  <li><em>Ex.</em></li>
</ul>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">BookLoggingInterceptor</span> <span class="o">{</span>

    <span class="c1">// Constructor for the interceptor, specifying that it should apply to the BookController</span>
    <span class="n">BookLoggingInterceptor</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">match</span><span class="o">(</span><span class="nl">controller:</span> <span class="s2">"book"</span><span class="o">)</span>
    <span class="o">}</span>

    <span class="c1">// Before method that logs an informational message before any action of the BookController is executed</span>
    <span class="kt">boolean</span> <span class="nf">before</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span> <span class="s2">"Accessing BookController at ${new Date()}"</span>
        <span class="kc">true</span> <span class="c1">// Return true to continue processing the request</span>
    <span class="o">}</span>

    <span class="c1">// After method to perform logic after the action executes, but before the view renders</span>
    <span class="kt">boolean</span> <span class="nf">after</span><span class="o">()</span> <span class="o">{</span> <span class="kc">true</span> <span class="o">}</span>

    <span class="c1">// AfterView method to perform logic after the view is rendered</span>
    <span class="kt">void</span> <span class="nf">afterView</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Post-view rendering logic can be added here</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li><strong>Controllers:</strong>
    <blockquote>
      <ul>
        <li>Handle HTTP requests, interact with domain classes and services to process business logic, and decide which view to render.</li>
      </ul>
    </blockquote>
  </li>
  <li><em>Ex.</em></li>
</ul>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">BookController</span> <span class="o">{</span>

    <span class="c1">// Dependency injection of BookService</span>
    <span class="n">BookService</span> <span class="n">bookService</span>

    <span class="c1">// Action to display a book's details</span>
    <span class="kt">def</span> <span class="nf">show</span><span class="o">(</span><span class="n">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Retrieve book details for the given id</span>
        <span class="kt">def</span> <span class="n">book</span> <span class="o">=</span> <span class="n">bookService</span><span class="o">.</span><span class="na">getBookDetails</span><span class="o">(</span><span class="n">id</span><span class="o">)</span>
        <span class="c1">// If no book is found, redirect to the list action with a flash message</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">book</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">flash</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="s2">"Book not found"</span>
            <span class="n">redirect</span><span class="o">(</span><span class="nl">action:</span> <span class="s2">"list"</span><span class="o">)</span>
            <span class="k">return</span>
        <span class="o">}</span>
        <span class="c1">// Pass the book to the view to be rendered</span>
        <span class="o">[</span><span class="nl">book:</span> <span class="n">book</span><span class="o">]</span>
    <span class="o">}</span>

    <span class="c1">// Action to save a new book</span>
    <span class="kt">def</span> <span class="nf">save</span><span class="o">(</span><span class="n">BookCommand</span> <span class="n">cmd</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Check for validation errors in the command object</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">cmd</span><span class="o">.</span><span class="na">hasErrors</span><span class="o">())</span> <span class="o">{</span>
            <span class="c1">// If errors exist, render the create view again with the command object</span>
            <span class="n">render</span><span class="o">(</span><span class="nl">view:</span> <span class="s2">"create"</span><span class="o">,</span> <span class="nl">model:</span> <span class="o">[</span><span class="nl">bookCmd:</span> <span class="n">cmd</span><span class="o">])</span>
            <span class="k">return</span>
        <span class="o">}</span>

        <span class="c1">// If validation passes, use the service to add the book and then redirect to the list action</span>
        <span class="n">bookService</span><span class="o">.</span><span class="na">addBook</span><span class="o">(</span><span class="n">cmd</span><span class="o">)</span>
        <span class="n">redirect</span><span class="o">(</span><span class="nl">action:</span> <span class="s2">"list"</span><span class="o">)</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li><strong>Command Object:</strong>
    <blockquote>
      <p>Encapsulates data for creation, including validation rules.
It’s used in things like save actions of Controllers to validate the input data before passing it to a Service.</p>
    </blockquote>
  </li>
  <li><em>Ex.</em></li>
</ul>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">grails.validation.Validateable</span>

<span class="c1">// @Validateable makes this class capable of being validated according to the constraints defined</span>
<span class="c1">// This is especially useful for classes that are not domain classes but still need validation logic</span>
<span class="nd">@Validateable</span>
<span class="kd">class</span> <span class="nc">BookCommand</span> <span class="o">{</span>
    <span class="c1">// Define properties that will be bound and validated</span>
    <span class="n">String</span> <span class="n">title</span>       <span class="c1">// Title of the book</span>
    <span class="n">String</span> <span class="n">author</span>      <span class="c1">// Author of the book</span>
    <span class="n">Date</span> <span class="n">releaseDate</span>   <span class="c1">// Release date of the book, can be null</span>

    <span class="c1">// Constraints block to enforce validation rules</span>
    <span class="kd">static</span> <span class="n">constraints</span> <span class="o">=</span> <span class="o">{</span>
        <span class="n">title</span> <span class="nl">blank:</span> <span class="kc">false</span><span class="o">,</span> <span class="nl">size:</span> <span class="mi">1</span><span class="o">..</span><span class="mi">255</span>  <span class="c1">// Title cannot be blank and must be within 1 to 255 characters</span>
        <span class="n">author</span> <span class="nl">blank:</span> <span class="kc">false</span><span class="o">,</span> <span class="nl">size:</span> <span class="mi">1</span><span class="o">..</span><span class="mi">255</span> <span class="c1">// Author cannot be blank and must be within 1 to 255 characters</span>
        <span class="n">releaseDate</span> <span class="nl">nullable:</span> <span class="kc">true</span>        <span class="c1">// Release date can be null, indicating it's optional</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<ul>
  <li><strong>Services:</strong>
    <blockquote>
      <ul>
        <li>Encapsulate the business logic of the application, providing a layer where complex operations, transactions, and domain class interactions are defined.</li>
        <li>Services in Grails are transactional by default and can be injected into controllers and other services.</li>
      </ul>
    </blockquote>
  </li>
  <li><em>Ex.</em></li>
</ul>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">grails.transaction.Transactional</span>

<span class="c1">// @Transactional annotation ensures that the methods within the service</span>
<span class="c1">// are executed within a transactional context, which means that</span>
<span class="c1">// any changes to the database will be committed only if the whole</span>
<span class="c1">// method executes successfully, and will be rolled back if an exception occurs</span>
<span class="nd">@Transactional</span>
<span class="kd">class</span> <span class="nc">BookService</span> <span class="o">{</span>

    <span class="c1">// Method to fetch book details by id</span>
    <span class="kt">def</span> <span class="nf">getBookDetails</span><span class="o">(</span><span class="n">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Book</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">id</span><span class="o">)</span> <span class="c1">// Retrieves the Book instance for the given id, if exists</span>
    <span class="o">}</span>

    <span class="c1">// Method to add a new book using the data from BookCommand</span>
    <span class="kt">def</span> <span class="nf">addBook</span><span class="o">(</span><span class="n">BookCommand</span> <span class="n">cmd</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Creates a new Book instance and saves it to the database</span>
        <span class="c1">// with flush:true to ensure immediate persistence</span>
        <span class="k">new</span> <span class="nf">Book</span><span class="o">(</span><span class="nl">title:</span> <span class="n">cmd</span><span class="o">.</span><span class="na">title</span><span class="o">,</span> <span class="nl">author:</span> <span class="n">cmd</span><span class="o">.</span><span class="na">author</span><span class="o">,</span> <span class="nl">releaseDate:</span> <span class="n">cmd</span><span class="o">.</span><span class="na">releaseDate</span><span class="o">).</span><span class="na">save</span><span class="o">(</span><span class="nl">flush:</span> <span class="kc">true</span><span class="o">)</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<ul>
  <li><strong>Domain Classes:</strong>
    <blockquote>
      <ul>
        <li>Represent the application’s data model, directly mapping to the database tables.</li>
        <li>They define the properties (fields) and constraints for the data.</li>
      </ul>
    </blockquote>
  </li>
  <li><em>Ex.</em></li>
</ul>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
    <span class="c1">// Define properties of the Book domain class</span>
    <span class="n">String</span> <span class="n">title</span>       <span class="c1">// Title of the book</span>
    <span class="n">String</span> <span class="n">author</span>      <span class="c1">// Author of the book</span>
    <span class="n">Date</span> <span class="n">releaseDate</span>   <span class="c1">// Release date of the book</span>

    <span class="c1">// Constraints block to enforce validation rules</span>
    <span class="kd">static</span> <span class="n">constraints</span> <span class="o">=</span> <span class="o">{</span>
        <span class="n">title</span> <span class="nl">blank:</span> <span class="kc">false</span>  <span class="c1">// Title cannot be blank</span>
        <span class="n">author</span> <span class="nl">blank:</span> <span class="kc">false</span> <span class="c1">// Author cannot be blank</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h2 id="annotations">Annotations</h2>

<hr />

<blockquote>
  <p>In summary:</p>
  <ul>
    <li>Annotations in Grails are a powerful mechanism for adding behavior, configuration, and information to various parts of a Grails application, simplifying development and enabling a wide range of functionalities with minimal intrusion into the actual business logic code.</li>
  </ul>
</blockquote>

<h3 id="how-annotations-work">How Annotations Work</h3>

<ul>
  <li>Annotations work by being processed by the Groovy and Grails runtime, as well as by various compile-time tools.</li>
  <li>When the Grails application starts up or when the application is being compiled, these annotations are read, and the corresponding behavior is applied to the annotated element. For example, the @Transactional annotation tells the Grails framework to proxy the annotated service to handle transaction boundaries transparently.</li>
</ul>

<h3 id="benefits-of-using-annotations">Benefits of Using Annotations</h3>

<blockquote>
  <ul>
    <li><strong>Simplicity:</strong>
      <blockquote>
        <ul>
          <li>Annotations keep the code cleaner and more readable by reducing boilerplate configuration.</li>
        </ul>
      </blockquote>
    </li>
    <li><strong>Configuration by Convention:</strong>
      <blockquote>
        <ul>
          <li>They adhere to the Grails philosophy of convention over configuration, allowing developers to achieve complex functionalities with minimal explicit configuration.</li>
        </ul>
      </blockquote>
    </li>
    <li><strong>Compile-Time Safety:</strong>
      <blockquote>
        <ul>
          <li>Some annotations enable compile-time checks, which can catch errors early in the development process.</li>
        </ul>
      </blockquote>
    </li>
    <li><strong>Aspect-Oriented Programming (AOP):</strong>
      <blockquote>
        <ul>
          <li>Annotations like @Transactional facilitate AOP by allowing cross-cutting concerns such as transactions and logging to be applied declaratively, without cluttering the business logic code.</li>
        </ul>
      </blockquote>
    </li>
  </ul>
</blockquote>

<p><strong>Custom Annotations</strong></p>

<ul>
  <li>Grails and Groovy also support the creation of custom annotations. Developers can define their annotations in Groovy or Java and then process them using AST transformations (Abstract Syntax Tree transformations) or at runtime, allowing for the creation of powerful, reusable components and behaviors.</li>
</ul>

<blockquote>
  <p><strong>Common Annotations in Grails</strong></p>
  <ul>
    <li><strong>@Transactional:</strong>
      <blockquote>
        <ul>
          <li>This annotation is used at the service layer to define the transactional behavior of a service class or specific methods within it.</li>
          <li>When you annotate a service class or method as @Transactional, Grails wraps calls to that class or method in a database transaction.</li>
          <li>This ensures that all database operations within the transaction boundary either complete successfully or roll back in case of an error, maintaining data integrity.</li>
        </ul>
      </blockquote>
    </li>
    <li><strong>@GrailsCompileStatic:</strong>
      <blockquote>
        <ul>
          <li>This annotation is used to indicate that a Grails artifact (like a controller or service) should be statically compiled.</li>
          <li>It leverages the Groovy compiler’s static compilation capabilities, leading to potential performance improvements and compile-time checking, which can catch errors that might otherwise only be found at runtime.</li>
        </ul>
      </blockquote>
    </li>
    <li><strong>@Validateable:</strong>
      <blockquote>
        <ul>
          <li>Typically used with command objects and POGOs (Plain Old Groovy Objects) that need validation logic similar to domain classes but aren’t persisted to the database.</li>
          <li>This annotation enables these objects to use Grails’ validation capabilities, including constraint declarations and error handling.</li>
        </ul>
      </blockquote>
    </li>
    <li><strong>@Mock:</strong>
      <blockquote>
        <ul>
          <li>Used in testing, this annotation is applied to a test class to indicate that certain domain classes should be mocked in the Grails application context when the test runs.</li>
          <li>This is essential for unit testing, where you need to isolate the class under test and avoid database interactions.</li>
        </ul>
      </blockquote>
    </li>
    <li><strong>@Profile:</strong>
      <blockquote>
        <ul>
          <li>Used to indicate that a class is a profile component.</li>
          <li>Profiles in Grails define a set of application features and plugins suitable for a specific type of application.</li>
          <li>For example, a web profile might include configurations and dependencies tailored for web application development.</li>
        </ul>
      </blockquote>
    </li>
    <li><strong>@Slf4j:</strong>
      <blockquote>
        <ul>
          <li>This annotation is used to inject a Slf4j logging instance into a Grails artifact, enabling logging without the need to manually create a logger instance.</li>
          <li>This simplifies logging across different components of a Grails application.</li>
        </ul>
      </blockquote>
    </li>
  </ul>
</blockquote>

<h3 id="gsp-tags">GSP Tags</h3>

<hr />

<p>GSP allows you to generate dynamic web content using:</p>

<ul>
  <li>Loops</li>
  <li>Variables</li>
  <li>Conditions</li>
  <li>Groovy code</li>
  <li>and more…</li>
</ul>

<p>All from within the browser.</p>

<p><strong>Variables:</strong></p>
<ul>
  <li>in GSP can be defined using the ${} syntax.</li>
  <li>These variables can be passed from the controller and accessed directly in the GSP.</li>
</ul>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- Assume 'message' is a variable passed from the controller --&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>${message}<span class="nt">&lt;/h1&gt;</span> <span class="c">&lt;!-- Displays the value of 'message' --&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p>**The <g:set>** tag.</g:set></p>
<ul>
  <li>This tag allows you to define a variable and assign it a value within the GSP itself.</li>
  <li>The variable can then be used throughout the GSP file.</li>
</ul>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="err">%@</span> <span class="na">page</span> <span class="na">contentType=</span><span class="s">"text/html;charset=UTF-8"</span> <span class="err">%</span><span class="nt">&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Example GSP<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

    <span class="c">&lt;!-- Define a new variable 'greeting' with the value 'WHATUP' --&gt;</span>
    <span class="nt">&lt;g:set</span> <span class="na">var=</span><span class="s">"greeting"</span> <span class="na">value=</span><span class="s">"'WHATUP!'"</span> <span class="nt">/&gt;</span>

    <span class="c">&lt;!-- Use the variable --&gt;</span>
    <span class="nt">&lt;h1&gt;</span>${greeting}<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p><strong>Conditions:</strong></p>
<ul>
  <li>in GSP can be handled using the <g:if> and <g:else> tags.</g:else></g:if></li>
  <li>These tags allow you to perform conditional checks and render content accordingly.</li>
</ul>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;g:if</span> <span class="na">test=</span><span class="s">"${message == 'HAPPY'}"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span>This content is displayed if 'someCondition' is true or in this case message equals HAPPY.<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/g:if&gt;</span>
<span class="nt">&lt;g:else&gt;</span>
    <span class="nt">&lt;div&gt;</span>This content is displayed if 'someCondition' is false.<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/g:else&gt;</span>
</code></pre></div></div>

<p><strong>Loops</strong></p>
<ul>
  <li>in GSP can be created using the <g:each> tag.</g:each></li>
  <li>This tag allows you to iterate over collections, such as lists or arrays, and render content for each item.</li>
</ul>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;g:each</span> <span class="na">var=</span><span class="s">"item"</span> <span class="na">in=</span><span class="s">"${itemList}"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;li&gt;</span>${item}<span class="nt">&lt;/li&gt;</span> <span class="c">&lt;!-- Displays each item in 'itemList' --&gt;</span>
    <span class="nt">&lt;/g:each&gt;</span>
<span class="nt">&lt;/ul&gt;</span>

</code></pre></div></div>

<h3 id="params">Params</h3>

<hr />

<blockquote>
  <p>A quick and dirty understanding of params:</p>
  <ul>
    <li>You can create params in your gsp</li>
    <li>You can access and use the params you create in your gsp throughout grails:
      <blockquote>
        <ul>
          <li>In controllers, services, interceptors and command objects</li>
        </ul>
      </blockquote>
    </li>
  </ul>
</blockquote>

<p><em>A working example:</em></p>
<blockquote>
  <p>Starting from the GSP</p>
  <ul>
    <li>Create a name and an id attribute in any html element.</li>
  </ul>
</blockquote>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">id=</span><span class="s">"keepExistingFile"</span> <span class="na">name=</span><span class="s">"keepExistingFile"</span> <span class="na">value=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/div&gt;</span>

</code></pre></div></div>

<blockquote>
  <p>These attributes become the params that are accessible within Grails</p>
  <ul>
    <li>The html <strong>value</strong> attribute can be checked from within the Grails framework and is associated with params.</li>
  </ul>
</blockquote>

<p><em>A working example continued..</em></p>

<blockquote>
  <p>GSP</p>
</blockquote>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;div&gt;</span>
        <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"form-label"</span><span class="nt">&gt;</span>Current Document:<span class="nt">&lt;/label&gt;</span>
        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"form-control disabled"</span><span class="nt">&gt;</span>${customItem.customOrderItem.fileUpload.fileName}<span class="nt">&lt;/span&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;br&gt;</span>
    <span class="nt">&lt;div&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">id=</span><span class="s">"keepExistingFile"</span> <span class="na">name=</span><span class="s">"keepExistingFile"</span> <span class="na">value=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;br&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"form-label"</span><span class="nt">&gt;</span>To Replace Document:<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"file"</span>
           <span class="na">data-parsley-error-message=</span><span class="s">"Document is Required"</span>
           <span class="na">class=</span><span class="s">"form-control"</span>
           <span class="na">id=</span><span class="s">"replaceDocument"</span>
           <span class="na">name=</span><span class="s">"replaceDocument"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="c">&lt;!-- JavaScript to Update the Hidden Element Value if File is Uploaded --&gt;</span>
<span class="nt">&lt;script&gt;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nf">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">DOMContentLoaded</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">replaceDocumentInput</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">replaceDocument</span><span class="dl">'</span><span class="p">);</span>
        <span class="nx">replaceDocumentInput</span><span class="p">.</span><span class="nf">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">change</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="c1">// Check if a file is selected</span>
            <span class="kd">var</span> <span class="nx">fileSelected</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">files</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">File selected:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">fileSelected</span><span class="p">);</span>

            <span class="c1">// Update the hidden input based on file selection</span>
            <span class="kd">var</span> <span class="nx">keepExistingFileInput</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">keepExistingFile</span><span class="dl">'</span><span class="p">);</span>
            <span class="nx">keepExistingFileInput</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">fileSelected</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">false</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">true</span><span class="dl">"</span><span class="p">;</span>
            <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Keep existing file value:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">keepExistingFileInput</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<blockquote>
  <p>The concept:</p>
  <ul>
    <li>If a new document is uploaded use javascript to listen for the change and update the associated html elements <strong>value</strong> attribute.</li>
    <li>The javascript is essentially going to just change true to false if a new file is uploaded</li>
  </ul>
</blockquote>

<blockquote>
  <p>In the Controller:</p>
</blockquote>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Transactional</span>
<span class="c1">// Marks the method as transactional, ensuring database operations within this method are part of a single transaction.</span>

<span class="kt">def</span> <span class="nf">update</span><span class="o">(</span><span class="n">Long</span> <span class="n">id</span><span class="o">){</span>
    <span class="c1">// Defines the 'update' action method that takes an ID (of type Long) as a parameter.</span>

    <span class="n">CustomItem</span> <span class="n">customItem</span> <span class="o">=</span> <span class="n">CustomItem</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">id</span><span class="o">)</span>
    <span class="c1">// Retrieves the 'CustomItem' entity from the database using the provided 'id'. If not found, 'customItem' will be null.</span>

    <span class="k">if</span><span class="o">(!</span><span class="n">customItem</span><span class="o">){</span>
        <span class="n">notFound</span><span class="o">()</span>
        <span class="c1">// If 'customItem' is null (meaning the item with the given ID doesn't exist), call the 'notFound()' method which typically sends a 404 response.</span>
        <span class="k">return</span>
    <span class="o">}</span>

    <span class="n">FileItem</span> <span class="n">fileItem</span> <span class="o">=</span> <span class="n">customItem</span><span class="o">.</span><span class="na">customOrderItem</span>
    <span class="c1">// Retrieves the 'FileItem' associated with the 'CustomItem'. This is presumably an entity related to the document/file handling.</span>

    <span class="n">bindData</span><span class="o">(</span><span class="n">customItem</span><span class="o">,</span> <span class="n">params</span><span class="o">,</span> <span class="o">[</span><span class="nl">exclude:</span> <span class="o">[</span><span class="s1">'customOrderItem'</span><span class="o">,</span> <span class="s1">'customOrderItemType'</span><span class="o">]])</span>
    <span class="c1">// Updates the 'customItem' entity with data from the request parameters ('params'), excluding the 'customOrderItem' and 'customOrderItemType' fields.</span>

    <span class="n">customItem</span><span class="o">.</span><span class="na">shippingNote</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="na">shippingNote</span>
    <span class="c1">// Explicitly sets the 'shippingNote' property of 'customItem' to the value provided in the request parameters.</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">params</span><span class="o">.</span><span class="na">keepExistingFile</span> <span class="o">==</span> <span class="s2">"false"</span><span class="o">){</span>
        <span class="c1">// Checks if the request parameter 'keepExistingFile' is explicitly set to "false", indicating the user wants to replace the existing file.</span>

        <span class="kt">def</span> <span class="n">document</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="na">replaceDocument</span>
        <span class="c1">// Retrieves the new document uploaded by the user from the request parameters.</span>

        <span class="n">FileUpload</span> <span class="n">fileUpload</span> <span class="o">=</span> <span class="n">fileItem</span><span class="o">.</span><span class="na">fileUpload</span>
        <span class="c1">// Retrieves the 'FileUpload' entity associated with the 'FileItem'. This represents the current document/file.</span>

        <span class="n">fileUpload</span><span class="o">.</span><span class="na">fileBytes</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="na">bytes</span>
        <span class="c1">// Updates the byte content of the 'fileUpload' with the byte content of the new document.</span>

        <span class="n">fileUpload</span><span class="o">.</span><span class="na">contentType</span><span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="na">contentType</span>
        <span class="c1">// Sets the content type of the 'fileUpload' to the content type of the new document.</span>

        <span class="n">fileUpload</span><span class="o">.</span><span class="na">fileName</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="na">originalFilename</span>
        <span class="c1">// Updates the file name of the 'fileUpload' with the original file name of the new document.</span>
    <span class="o">}</span>
    <span class="k">else</span> <span class="o">{</span>
        <span class="n">customItem</span><span class="o">.</span><span class="na">customOrderItem</span><span class="o">.</span><span class="na">fileUpload</span><span class="o">.</span><span class="na">refresh</span><span class="o">()</span>
        <span class="c1">// If 'keepExistingFile' is not "false", refreshes the 'fileUpload' entity to ensure it's up-to-date with the database state. This could be a safety measure or to ensure any lazy-loaded fields are populated.</span>
    <span class="o">}</span>

    <span class="n">customItem</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="nl">flush:</span> <span class="kc">true</span><span class="o">,</span> <span class="nl">failOnError:</span> <span class="kc">true</span><span class="o">)</span>
    <span class="c1">// Saves the 'customItem' entity to the database, ensuring immediate persistence ('flush: true') and throwing an exception on any validation or persistence errors ('failOnError: true').</span>

    <span class="n">redirect</span> <span class="nl">action:</span> <span class="s2">"show"</span><span class="o">,</span> <span class="nl">id:</span> <span class="n">customItem</span><span class="o">.</span><span class="na">id</span>
    <span class="c1">// Redirects the user to the 'show' action, passing the ID of the 'customItem', likely to display the updated item details.</span>
<span class="o">}</span>

</code></pre></div></div>

        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2024-06-10T00:00:00+00:00">June 10, 2024</time></p>

      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Grails%20http%3A%2F%2Flocalhost%3A4000%2Fgrails%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Fgrails%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/grails/" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/coding/first/" class="pagination--pager" title="First Post!
">Previous</a>
    
    
      <a href="#" class="pagination--pager disabled">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">You may also enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/coding/first/" rel="permalink">First Post!
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2024-05-08T00:00:00+00:00">May 8, 2024</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          less than 1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">
Notice Test

</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="mailto:kensigel.j@gmail.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
        
      
        
          <li><a href="https://Joseph-eee.github.io" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> Website</a></li>
        
      
        
          <li><a href="https://github.com/Joseph-eee" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2024 <a href="http://localhost:4000">Deep Dive</a>. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>







    
  <script>
    var disqus_config = function () {
      this.page.url = "http://localhost:4000/grails/";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/grails"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://Joseph-eee.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  




  </body>
</html>
